@model LuckDraw.Models.LKD_LuckyDraw
@{
    ViewBag.Title = "Lucky Draw Details";
}

<style>
    .container-fluid {
        width: 100vw !important;
        margin-left: calc(-50vw + 50%) !important;
        margin-right: calc(-50vw + 50%) !important;
        padding: 0 !important;
        color: black;
    }

    .candidate-section {
        max-width: none !important;
        width: 100% !important;
        margin: 0;
        padding: 40px 60px;
    }
    /* Grid layout full width */
    .candidate-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin-top: 30px;
        justify-items: center;
    }

    /* Card style */
    .candidate-card {
        background: #fae9d9;
        border-radius: 10px;
        padding: 18px 12px;
        width: 150px;
        text-align: center;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.2s ease-in-out, box-shadow 0.2s;
    }

        .candidate-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

    /* Tên */
    .candidate-name {
        font-weight: 700;
        font-size: 16px;
        color: #000;
    }

    /* Bộ phận */
    .candidate-dept {
        font-size: 13px;
        color: #555;
        margin-top: 5px;
    }

</style>

<div class="container-fluid" style="color:black; padding:40px 60px;">
    <div class="candidate-section">
        <h3>@Model.NameLuckyDraw</h3>

        <!-- Candidate preview table -->
        @if (Model.Candidates != null && Model.Candidates.Any())
        {
            <div class="candidate-grid">
                @foreach (var c in Model.Candidates)
                {
                    <div class="candidate-card">
                        <div class="candidate-name">@c.FullName</div>
                        <div class="candidate-dept">@c.Department</div>
                    </div>
                }
            </div>
        }
        else
        {
            <p>No candidates available.</p>
        }

        <a href="@Url.Action("LuckyDrawList", "LuckyDraw")" class="btn btn-primary" style="margin-top:50px">
            Back to List
        </a>
    </div>
</div>
</div>

<!-- Import Partial Modals -->
@Html.Partial("_CandidateModal")
@Html.Partial("_PrizeModal")

<!--External JS config -->
@section scripts {
    <script>
        // Shared LuckyDraw ID
        var luckyDrawId = @Model.Id;

        // API endpoints for AJAX
        var candidateUrls = {
            get: '@Url.Action("GetCandidates", "Candidate")',
            create: '@Url.Action("Create", "Candidate")',
            edit: '@Url.Action("Edit", "Candidate")',
            delete: '@Url.Action("Delete", "Candidate")'
        };

        var prizeUrls = {
            get: '@Url.Action("GetPrizes", "Prizes")',
            create: '@Url.Action("Create", "Prizes")',
            edit: '@Url.Action("Edit", "Prizes")',
            delete: '@Url.Action("Delete", "Prizes")'
        };
    </script>

    <!-- Main logic -->
    <script src="~/Scripts/LuckyDraw/Details.js"></script>
}
